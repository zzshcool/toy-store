# 【一抽入魂線上抽】專案升級規格書 (v3.0 - Final)

本文件詳列了將現有專案轉型為「一抽入魂」專業線上抽獎平台的技術規格、市場背景、UI/UX 互動流程及安全防禦規範。

## 1. 專案背景與市場現況

### A. 客戶背景

- **主要客戶**: 【一抽入魂】 ([goneintothesoul.com.tw](https://www.goneintothesoul.com.tw/))
- **規模**: 已具備 **20,000+** 實體/線上會員與多家實體門市背景。
- **定位**: 結合線下實力，打造更公平、更具沉浸感的線上抽獎平台「一抽入魂線上抽」。

### B. 競品分析與差異化

- **參考對象**: [Wonderful Toy](https://wonderful-toy.com/), [Kuji Hunter](https://kujihunter.com/), [Slime Toy](https://slimetoy.com.tw/), [OneOne](https://www.oneone.com.tw/)。
- **優勢策略**:
    1. **極致互動**: 實現比對手更擬真的撕票與咪牌效果。
    2. **安全可靠**: 引入代碼級限流防禦自動化攻擊。
    3. **積分回饋**: 建立深度的積分商店體系與現有 2 萬會員連結。

## 2. UI/UX 詳細規格 (前端互動核心)

### A. 關於我們 (About) & 常見問題 (FAQ)

- **參考設計**: [Wonderful Toy About](https://wonderful-toy.com/about/) / [FAQ](https://wonderful-toy.com/faq/)
- **UI 需求**:
  - 使用**多層次捲動區塊**介紹實體門市與「公平抽獎」流程。
  - FAQ 需支援**分類展開式 (Accordion)** 結構。
  - **聯絡我們**: 提供表單、LINE 官方與 FB 粉專連結。

### B. 代幣儲值 (Points Deposit)

- **參考設計**: [Wonderful Toy Points](https://wonderful-toy.com/points/)
- **UI 需求**:
  - **階梯式卡片**: 顯示 100, 500, 1000 等儲值方案及其對應額外贈分。
  - **錢包儀表板**: 醒目顯示當前代幣與積分餘額。

### C. 一番賞系統 - 精品化互動

- **選號階段**: 渲染完整的抽獎箱網格，會員可手動點選「心儀號碼」。
- **購買流程**: 選號 -> 扣款確認。
- **互動特效**:
    1. **進入全螢幕撕票**: 點擊後顯示特写籤紙。
    2. **咪牌 (Peek) 效果**: 支援滑動或手動觸發撕票動畫，模擬實體「慢慢撕開」的期待感。
    3. **中獎氣氛**: 大獎出現時伴隨震動與亮眼動效 (GSAP)。

### D. 動漫周邊 (原九宮格) - 動態格數與天選抽

- **重構邏輯**: 將九宮格改名為「動漫周邊」，格數由後端根據獎項動態生成。
- **購買流程**:
    1. **列表頁**: 展示不同主題（鋼彈、海賊王等）。
    2. **詳情頁**: 詳細的獎項分布列表、主題主圖。
    3. **抽選區**: 提供「單抽」、「多抽」按鈕。
    4. **天選抽 (God's Choice)**: 導入**電腦自動隨機選號**功能。

### E. 擬真扭蛋機優化 (Gacha Styling)

- **視覺需求**: [Slime Toy 擬真風格](https://slimetoy.com.tw/gacha/detail/175)。
- **互動流程**:
    1. **機台造型**: 渲染典型的 3D 質感扭蛋機體。
    2. **開扭動畫**: 點擊「開扭」按鍵 -> **把手旋轉動畫** -> 零件聲效。
    3. **掉落動畫**: 扭蛋從出口滾落 -> **點擊扭蛋破殼** -> 出現獎賞。
    4. **試轉區**: 提供無消耗試玩區供會員體驗。

### F. 積分兌換商店 (Points Shop)

- **名詞變更**: 全站原有「碎片 (Shard)」全面更名為「**積分 (Points)**」。
- **頁面定義**: 獨立於現金商城，作為抽獎忠誠度回饋的限定取貨區。

## 3. 技術架構與安全防禦 (Technical & Security)

針對 2 萬人規模及防止攻擊之設計：

### A. 系統架構

- **本地緩存 (Local Cache)**: 使用 `Caffeine` 緩存熱門活動與系統設定。
- **流量加速**: 整合 **Cloudflare** 進行邊緣緩存、CDN 及基本的 DDoS 防禦。
- **數據完整性**: 使用 JPA 樂觀鎖/悲觀鎖確保「一號一籤」不重複中獎。

### B. 代碼級安全防禦 (Anti-Automation)

- **接口限流 (Rate Limiting)**: 針對抽獎 API 實施 IP + MemberID 頻率控制（如：每秒限 1 請求）。
- **防自動化腳本**:
  - 操作路徑隨機偏移監控。
  - 連續高頻操作自動觸發 **Captcha (驗證碼)**。
  - 關鍵數據庫更新前檢索 User-Agent 與行為指紋。

## 4. 專案里程碑

1. **Phase 1**: 品牌重塑 (LOGO/色系/積分名詞更動) 與 安全限流框架模組開發。
2. **Phase 2**: 核心互動升級 (視覺扭蛋機開發、一番賞選號與咪牌動畫實作)。
3. **Phase 3**: 靜態頁面與 FAQ/About/Contact 建立。
4. **Phase 4**: 網站上線測試、併發壓力測試及 Cloudflare 防禦整合。

---
*文件修訂日期: 2025-12-22*
*總設計師: Senior E-commerce Engineer*

## 5. 行動端沉浸式體驗與全系統試抽功能 (補充需求)

### A. 全系統試抽機制 (Trial Feature)

- **核心要求**: 針對「一番賞 (C)」、「動漫周邊 (D)」、「扭蛋系統 (E)」全面導入試抽功能。
- **目的**: 讓玩家在進入正式消費前，能先行體驗一套完整且精美的抽獎動畫（選號 -> 過程 -> 揭曉），降低進入門檻。

### B. 沉浸式登錄轉換 (Seamless Conversion)

- **轉換邏輯**: 當玩家在試抽後想要正式購買（真抽），或直接進行正式抽選時，若系統檢測到未登錄，**嚴禁跳轉至獨立登錄頁**。
- **技術實現**:
  - 直接在當前頁面彈出 **登錄 / 註冊一體化 Modal 彈窗**。
  - 登錄完成後，彈窗無感關閉並直接開啟支付確認，確保玩家的視覺與情緒不被頁面跳轉打斷。

### C. 手機優先 RWD 設計 (Mobile-First UX)

- **流量比例**: 預計 9 成用戶使用行動裝置消費。
- **設計準則**:
  - **觸控優化**: 所有高互動元素（如扭蛋旋轉把手、一番賞撕票區）需具備「大點擊熱區」與「觸覺反饋感（動畫/震動）」。
  - **屏幕適配**: 確保橫幅標題、活動主圖與抽獎組件在不同尺寸手機（16:9, 19.5:9 等）下完美適配，無破版現象。
  - **沉浸感提升**: 抽獎過程中使用全屏或近全屏的層疊效果，遮蔽無關干擾資訊。
