<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--
    遊戲規則說明彈窗共用 Fragment
    用法: <div th:replace="~{fragments/game-rules-modal :: rules-modal(gameType='ichiban', gameName='一番賞')}"></div>
-->

<!-- 通用規則彈窗 (使用全域 GAME_RULES 配置) -->
<div th:fragment="rules-modal(gameType)" id="rulesModal" class="game-modal-overlay rules-modal" style="display: none;">
    <div class="game-modal-wrapper">
        <div class="rules-modal-content">
            <button class="modal-close-btn" onclick="closeRulesModal()">&times;</button>
            <h3 id="rulesTitle" class="rules-title">📖 遊戲規則</h3>
            <div id="rulesBody" class="rules-body">
                <!-- 規則內容由 JS 根據 gameType 動態填充 -->
            </div>
        </div>
    </div>
</div>

<!-- 一番賞專用規則彈窗 -->
<div th:fragment="ichiban-rules-modal(gameName, pricePerDraw)" id="rulesModal" class="game-modal-overlay"
    style="display: none;">
    <div class="rules-modal-wrapper">
        <div class="rules-modal-content">
            <button onclick="closeRulesModal()" class="modal-close-btn">&times;</button>

            <h3 class="rules-title">
                📖 <span th:text="${gameName}">遊戲名稱</span> - 玩法說明
            </h3>

            <!-- 價格資訊卡 -->
            <div class="price-info-card">
                <div class="price-label">單抽價格</div>
                <div class="price-value">💰 $<span th:text="${pricePerDraw}">0</span></div>
            </div>

            <!-- 玩法規則 -->
            <div class="rules-section">
                <h4>🎯 一番賞玩法</h4>
                <ul>
                    <li>選擇喜歡的號碼格子</li>
                    <li>可一次選擇多個格子</li>
                    <li>每個格子對應一個隱藏獎品</li>
                    <li>確認購買後立即揭曉獎品</li>
                    <li>已開過的格子無法再選</li>
                </ul>
            </div>

            <!-- 獎品說明 -->
            <div class="rules-section">
                <h4>🎁 獎品說明</h4>
                <ul>
                    <li><strong>A賞、B賞</strong>：超稀有大獎</li>
                    <li><strong>C賞、D賞</strong>：稀有獎品</li>
                    <li><strong>E賞以下</strong>：一般收藏品</li>
                    <li><strong>LAST賞</strong>：最後一抽特別獎</li>
                </ul>
            </div>

            <button class="btn-gacha" onclick="closeRulesModal()" style="width: 100%; margin-top: 20px;">
                我知道了
            </button>
        </div>
    </div>
</div>

<!-- 盲盒專用規則彈窗 -->
<div th:fragment="blindbox-rules-modal" id="blindboxRulesModal" class="game-modal-overlay" style="display: none;">
    <div class="rules-modal-wrapper">
        <div class="rules-modal-content">
            <button onclick="closeBlindboxRulesModal()" class="modal-close-btn">&times;</button>

            <h3 class="rules-title">📦 盲盒玩法說明</h3>

            <div class="rules-section">
                <h4>🎮 遊戲流程</h4>
                <ol>
                    <li>選擇一個盲盒系列</li>
                    <li>點擊想要的小盒進行「鎖定」</li>
                    <li>鎖定後有 <strong>180 秒</strong> 決定時間</li>
                    <li>確認購買即可揭曉盒內獎品</li>
                </ol>
            </div>

            <div class="rules-section">
                <h4>🃏 道具卡</h4>
                <ul>
                    <li><strong>提示卡</strong>：根據稀有度篩選可選盒子</li>
                    <li><strong>透視卡</strong>：偷看盒內獎品</li>
                    <li><strong>換一盒</strong>：釋放當前鎖定，隨機鎖定新盒子</li>
                </ul>
            </div>

            <div class="rules-section">
                <h4>🎁 其他玩法</h4>
                <ul>
                    <li><strong>全包</strong>：一次購買所有剩餘盒子</li>
                    <li><strong>天選抽</strong>：系統隨機為您選擇一個盒子</li>
                </ul>
            </div>

            <button class="btn-gacha" onclick="closeBlindboxRulesModal()" style="width: 100%; margin-top: 20px;">
                我知道了
            </button>
        </div>
    </div>
</div>

</html>