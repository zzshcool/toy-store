<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{admin_layout :: html(title='抽獎系統設定', content=~{::content})}">

<body>
    <div th:fragment="content">
        <div th:if="${success}" class="alert alert-success" th:text="${success}"
            style="margin-bottom: 20px; padding: 15px; background: #d4edda; color: #155724; border-radius: 8px;"></div>

        <!-- 功能開關 -->
        <div class="setting-card">
            <div class="header">🔌 功能開關</div>
            <div th:each="setting : ${settings}" th:if="${setting.settingKey.startsWith('module.')}">
                <div class="setting-item">
                    <div class="info">
                        <div th:text="${setting.description}">設定描述</div>
                        <div class="key" th:text="${setting.settingKey}">key</div>
                    </div>
                    <div class="action">
                        <form th:action="@{/admin/gacha/settings/update}" method="post">
                            <input type="hidden" name="key" th:value="${setting.settingKey}">
                            <input type="hidden" name="value"
                                th:value="${setting.settingValue == 'true' ? 'false' : 'true'}">
                            <button type="submit" class="toggle-btn"
                                th:classappend="${setting.settingValue == 'true' ? 'on' : 'off'}"></button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- 遊戲參數 -->
        <div class="setting-card">
            <div class="header">🎮 遊戲參數</div>
            <div th:each="setting : ${settings}" th:if="${setting.settingKey.startsWith('gacha.')}">
                <div class="setting-item">
                    <div class="info">
                        <div th:text="${setting.description}">設定描述</div>
                        <div class="key" th:text="${setting.settingKey}">key</div>
                    </div>
                    <div class="action">
                        <form th:action="@{/admin/gacha/settings/update}" method="post"
                            style="display: flex; gap: 10px;">
                            <input type="hidden" name="key" th:value="${setting.settingKey}">
                            <input type="number" name="value" th:value="${setting.settingValue}"
                                style="width: 100px; padding: 8px; border: 1px solid #ddd; border-radius: 8px;">
                            <button type="submit" class="btn btn-sm btn-primary">更新</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>